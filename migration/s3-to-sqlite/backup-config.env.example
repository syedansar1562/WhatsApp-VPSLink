# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
# Location: /root/whatsapp-vpslink/.env.backup
# Purpose: Configure SQLite backup behavior and S3 provider
# Created: December 28, 2025

# ============================================================================
# BACKUP PROVIDER (Garage or Backblaze)
# ============================================================================

# Options: "garage" or "backblaze"
BACKUP_PROVIDER=garage

# ============================================================================
# BACKUP SCHEDULE
# ============================================================================

# How often to backup (in minutes)
# Options: 15, 30, 60 (hourly), 120 (every 2 hours), 360 (every 6 hours), 720 (twice daily), 1440 (daily)
# Default: 60 (hourly)
BACKUP_INTERVAL_MINUTES=60

# ============================================================================
# GARAGE S3 (Self-Hosted on ChromeBox)
# ============================================================================
# Use these when BACKUP_PROVIDER=garage

GARAGE_ENDPOINT=http://149.34.177.160:3900
GARAGE_ACCESS_KEY_ID=GKd211b1cb6eb2935da1bbd565
GARAGE_SECRET_ACCESS_KEY=975ed880ab48527fea4c3bcc71c951660c4efaea14088946d0524e112cca094c
GARAGE_BUCKET=whatsapp-vpslink
GARAGE_REGION=garage
GARAGE_FORCE_PATH_STYLE=true
GARAGE_PREFIX=backups/

# ============================================================================
# BACKBLAZE B2 (Cloud Storage)
# ============================================================================
# Use these when BACKUP_PROVIDER=backblaze

BACKBLAZE_ENDPOINT=https://s3.eu-central-003.backblazeb2.com
BACKBLAZE_ACCESS_KEY_ID=00330bc627754a00000000001
BACKBLAZE_SECRET_ACCESS_KEY=K003QhZCxsajKLOnbCKjFpep27+KfBQ
BACKBLAZE_BUCKET=WhatsAppVPS
BACKBLAZE_REGION=eu-central-003
BACKBLAZE_FORCE_PATH_STYLE=false
BACKBLAZE_PREFIX=backups/

# ============================================================================
# BACKUP RETENTION (applies to both providers)
# ============================================================================

# Keep hourly backups for X hours (default: 24)
BACKUP_RETAIN_HOURLY_HOURS=24

# Keep daily backups for X days (default: 7)
BACKUP_RETAIN_DAILY_DAYS=7

# Keep weekly backups for X weeks (default: 4)
BACKUP_RETAIN_WEEKLY_WEEKS=4

# Keep monthly backups for X months (default: 12)
BACKUP_RETAIN_MONTHLY_MONTHS=12

# ============================================================================
# BACKUP COMPRESSION
# ============================================================================

# Compress backups before uploading (recommended)
# Options: true or false
BACKUP_COMPRESS=true

# Compression level (1-9, where 9 is maximum compression but slower)
# Default: 6 (good balance)
BACKUP_COMPRESSION_LEVEL=6

# ============================================================================
# LOCAL BACKUP RETENTION
# ============================================================================

# Keep local backups for X hours before deleting (saves disk space)
# Set to 0 to delete immediately after upload
# Default: 24 (keep last 24 hours locally)
BACKUP_LOCAL_RETENTION_HOURS=24

# ============================================================================
# BACKUP NOTIFICATIONS (Optional)
# ============================================================================

# Send notification on backup failure
# Options: true or false
BACKUP_NOTIFY_ON_FAILURE=false

# Webhook URL for notifications (optional, e.g., Discord webhook)
BACKUP_WEBHOOK_URL=

# ============================================================================
# ADVANCED SETTINGS
# ============================================================================

# Maximum backup file size (in MB) before warning
# Default: 500
BACKUP_MAX_SIZE_MB=500

# Enable backup logging to file
# Options: true or false
BACKUP_ENABLE_LOGGING=true

# Log file location
BACKUP_LOG_FILE=/root/whatsapp-vpslink/logs/backup.log

# ============================================================================
# EXAMPLES
# ============================================================================

# Example 1: Hourly backups to Garage S3
# BACKUP_PROVIDER=garage
# BACKUP_INTERVAL_MINUTES=60

# Example 2: Daily backups to Backblaze
# BACKUP_PROVIDER=backblaze
# BACKUP_INTERVAL_MINUTES=1440

# Example 3: Every 4 hours to Garage, keep 48 hours local
# BACKUP_PROVIDER=garage
# BACKUP_INTERVAL_MINUTES=240
# BACKUP_LOCAL_RETENTION_HOURS=48

# Example 4: Every 15 minutes (frequent) to Backblaze
# BACKUP_PROVIDER=backblaze
# BACKUP_INTERVAL_MINUTES=15
# BACKUP_RETAIN_HOURLY_HOURS=6
# BACKUP_LOCAL_RETENTION_HOURS=2

# ============================================================================
# RECOMMENDED CONFIGURATIONS
# ============================================================================

# For Testing/Development (fast, frequent):
# BACKUP_PROVIDER=garage
# BACKUP_INTERVAL_MINUTES=30
# BACKUP_RETAIN_HOURLY_HOURS=12
# BACKUP_RETAIN_DAILY_DAYS=3

# For Production (balance):
# BACKUP_PROVIDER=garage
# BACKUP_INTERVAL_MINUTES=60
# BACKUP_RETAIN_HOURLY_HOURS=24
# BACKUP_RETAIN_DAILY_DAYS=7
# BACKUP_RETAIN_WEEKLY_WEEKS=4
# BACKUP_RETAIN_MONTHLY_MONTHS=12

# For Cost-Conscious (Backblaze, less frequent):
# BACKUP_PROVIDER=backblaze
# BACKUP_INTERVAL_MINUTES=360  # Every 6 hours
# BACKUP_RETAIN_DAILY_DAYS=14
# BACKUP_RETAIN_WEEKLY_WEEKS=8
# BACKUP_LOCAL_RETENTION_HOURS=0  # Delete immediately

# For Paranoid (both providers, very frequent):
# Set up two backup scripts - one for each provider
# Run both in parallel with different schedules
